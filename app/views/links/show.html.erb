<h1>
  <strong><%= link_to @link.title, @link.url %></strong>
</h1>

<div class="btn-group">
  <%= link_to upvote_link_path(@link), method: :put, class: "btn btn-outline-secondary btn-sm" do %>
    Upvote
    <%= @link.get_upvotes.size %>
  <% end %>
  <%= link_to downvote_link_path(@link), method: :put, class: "btn btn-outline-secondary btn-sm" do %>
    Downvote
    <%= @link.get_downvotes.size %>
  <% end %>
</div>

<div class="comment-count">
  <small>
    <%= pluralize(@link.comments.count, 'Comment') %>
  </small>
</div>

<div class="link-actions">
  <% if @link.user == current_user %>
    <%= link_to 'Edit', edit_link_path(@link) %> |
    <%= link_to 'Destroy', @link,
          method: :delete,
          data: { confirm: 'Are you sure?' },
          class: 'text-danger' %> |
  <% end %>
  <%= link_to 'Back', links_path %>
</div>

<hr />

<div class="link-comment-form mb-4">
  <%= render partial: 'comments/form', locals: {
          link: @link,
          comment: Comment.new
        } %>
</div>

<div class="link-comments">
  <%= render partial: @link.comments.order(cached_weighted_average: :desc) %>
</div>
